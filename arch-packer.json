{
  "builders": [{
    "type": "virtualbox",
    "guest_os_type": "Linux",
    "iso_url": "http://cake.lib.fit.edu/archlinux/iso/2013.09.01/archlinux-2013.09.01-dual.iso",
    "iso_checksum": "f87e89a502fb2d1f30ca0f9a927c9a91",
    "iso_checksum_type": "md5",
    "ssh_username": "vagrant",
    "ssh_password": "vagrant",
    "ssh_wait_timeout": "920s",
    "shutdown_command": "sudo halt -p",
    "boot_wait": "5s",
    "boot_command": [
      "<enter>",
      "<wait10><wait5>",
      "gdisk /dev/sda<enter>",
      "o<enter>y<enter>",
      "n<enter>1<enter><enter>+100M<enter><enter>",
      "c<enter>/boot<enter>",
      "n<enter>2<enter><enter>+3G<enter>8200<enter>",
      "n<enter>3<enter><enter>+12G<enter><enter>",
      "c<enter>3<enter>/<enter>",
      "n<enter>4<enter><enter><enter><enter>",
      "c<enter>4<enter>/home<enter>",
      "w<enter>y<enter><wait5>",
      "mkfs.ext4 /dev/sda1<enter>",
      "mkfs.ext4 /dev/sda3<enter><wait><wait>",
      "mkfs.ext4 /dev/sda4<enter><wait><wait>",
      "mkswap /dev/sda2<enter>",
      "swapon /dev/sda2<enter>",
      "mount /dev/sda3 /mnt<enter>",
      "mkdir /mnt/boot<enter>",
      "mount /dev/sda1 /mnt/boot<enter>",
      "mkdir /mnt/home<enter>",
      "mount /dev/sda4 /mnt/home<enter>",
      "pacstrap /mnt base<enter>",
      "<wait10><wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
      "<wait10><wait10><wait10><wait10><wait10><wait10><wait10>",
      "genfstab -p /mnt > /mnt/etc/fstab<enter>",
      "arch-chroot /mnt<enter>",
      "ln -s /usr/share/zoneinfo/America/Boise /etc/localtime<enter>",
      "echo 'LANG=en_US.UTF-8' > /etc/locale.conf<enter>",
      "export LANG=en_US.UTF-8<enter>",
      "sed -i -e 's/\\#en\\_US/en\\_US/g' /etc/locale.gen<enter>",
      "locale-gen<enter><wait5>",
      "echo 'KEYMAP=us' > /etc/vconsole.conf<enter>",
      "echo 'vagrant-arch' > /etc/hostname<enter>",
      "mkinitcpio -p linux<enter>",
      "<wait10><wait><wait><wait>",
      "pacman -S syslinux gptfdisk openssh sudo --noconfirm<enter>",
      "<wait10><wait10><wait10>",
      "sed -i -e 's/\\# \\%wheel ALL=(ALL) NOPASSWD/\\%wheel ALL=(ALL) NOPASSWD/g' /etc/sudoers<enter>",
      "syslinux-install_update -iam<enter>",
      "<wait5><wait><wait><wait>",
      "systemctl enable dhcpcd@enp0s3.service<enter>",
      "systemctl enable sshd.service<enter>",
      "sed -i -e 's/\\#Pub/Pub/g' /etc/ssh/sshd_config<enter>",
      "echo 'vboxguest' >> /etc/modules-load.d/virtualbox.conf<enter>",
      "echo 'vboxsf' >> /etc/modules-load.d/virtualbox.conf<enter>",
      "echo 'vboxvideo' >> /etc/modules-load.d/virtualbox.conf<enter>",
      "useradd -d /home/vagrant -G wheel -m -s /bin/sh vagrant<enter>",
      "passwd vagrant<enter>vagrant<enter>vagrant<enter>",
      "exit<enter>",
      "umount /mnt/boot<enter>",
      "umount /mnt/home<enter>",
      "umount /mnt<enter>",
      "reboot<enter>",
      "<wait10><wait10>"
    ]
  }],
  "provisioners": [{
    "type": "shell",
    "inline": [
      "sudo pacman --noconfirm -S bash",
      "sudo pacman --noconfirm -S vim",
      "sudo pacman --noconfirm -S wget",
      "sudo pacman --noconfirm -S virtualbox-guest-utils",
      "sudo pacman --noconfirm -Syu",
      "sudo chsh -s /bin/bash vagrant",
      "wget https://raw.github.com/mitchellh/vagrant/master/keys/vagrant.pub",
      "mkdir .ssh",
      "mv vagrant.pub .ssh/authorized_keys",
      "sudo sed -i -e 's/\\#Pub/Pub/g' /etc/ssh/sshd_config",
      "rm VBoxGuestAdditions.iso"
    ]
  }],
  "post-processors": ["vagrant"]
}
